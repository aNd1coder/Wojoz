if(!window.Mstar)Mstar={};Mstar.Config={MstarsiteConfig:{Domain:"pt9999.com",ProductImageUrl:"/UploadFiles/Product/",ProductUrlRewriteName:"/Product/Patti-Jewelry",MstarResources:"/MstarResources/Defualt/",MstarResourcesImages:"/MstarResources/Defualt/images/",MstarResourcesScripts:"/MstarResources/Defualt/Scripts/",MstarResourcesScriptPlugins:"/MstarResources/Defualt/Scripts/Plugins/",MstarResourcesStyles:"/MstarResources/Defualt/Styles/",UrlPathMappings:{WWWSite:"http://www.pt9999.com"}}};Mstar.ResourceConfig={StringResourceConfig:{SearchValueNull:"搜索属于我的钻饰",SystemErrorInfo:"系统繁忙，请稍后重试，谢谢！"}};var m=document.uniqueID&&document.compatMode&&!window.XMLHttpRequest&&document.execCommand;try{!!m&&m("BackgroundImageCache",false,true)}catch(oh){}var SysEC={},ua=navigator.userAgent.toLowerCase(),s;(s=ua.match(/msie ([\d.]+)/))?(SysEC.ie=s[1]):(s=ua.match(/firefox\/([\d.]+)/))?(SysEC.firefox=s[1]):(s=ua.match(/chrome\/([\d.]+)/))?(SysEC.chrome=s[1]):(s=ua.match(/opera.([\d.]+)/))?(SysEC.opera=s[1]):(s=ua.match(/version\/([\d.]+).*safari/))?(SysEC.safari=s[1]):0;var version;if(SysEC.ie)version="ie ie_"+SysEC.ie.substring(0,1);if(SysEC.firefox)version="firefox firefox_"+SysEC.firefox.substring(0,1);if(SysEC.chrome)version="chrome chrome_"+SysEC.chrome.substring(0,1);if(SysEC.opera)version="opera opera_"+SysEC.opera.substring(0,1);if(SysEC.safari)version="safari safari_"+SysEC.safari.substring(0,1);document.documentElement.className=version;function StringBuilder(a){this.strings=[""];this.Append(a)}StringBuilder.prototype.Append=function(a){a&&this.strings.push(a)};StringBuilder.prototype.Clear=function(){this.strings.length=1};StringBuilder.prototype.ToString=function(){return this.strings.join("")};String.prototype.replaceAll=function(a,b){return this.replace(new RegExp(a,"gm"),b)};window.usingNamespace=function(b){var a=window;if(!(typeof b==="string"&&b.length!=0))return a;for(var f=a,e=b.split("."),c=0;c<e.length;c++){var d=e[c];if(!a[d])a[d]={};f=a=a[d]}return f};usingNamespace("Mstar.Utils").String={IsNullOrEmpty:function(a){return!(typeof a==="string"&&a.length!=0)},Trim:function(a){return a.replace(/^\s+|\s+$/g,"")},TrimStart:function(c,a){if($String.IsNullOrEmpty(a))a="\\s";var b=new RegExp("^"+a+"*","ig");return c.replace(b,"")},TrimEnd:function(c,a){if($String.IsNullOrEmpty(a))a="\\s";var b=new RegExp(a+"*$","ig");return c.replace(b,"")},SetLen:function(a,b){return $String.ActualLength(a)<b?a:a.substr(0,i)+"..."}};var $String=Mstar.Utils.String;usingNamespace("Mstar").State={Cookies:{Name:{Customer:"Customer",Product:"Product"},Set:function(h,b){var a="";if(typeof b=="string")a=escape(b);else if(typeof b=="object"){var e=Mstar.State.Cookies.ToJson(Mstar.State.Cookies.Get(h));if(e==false)e={};for(var f in b)eval("jsonv."+f+'="'+b[f]+'"');for(var f in e)a+=f+"="+escape(e[f])+"&";a=a.substring(0,a.length-1)}var g,l,d,j;try{var c=$CookieConfig[h];if(null!=c){d=$MstarsiteConfig.Domain;if(c.TopLevelDomain==false)d="";var k=$Converter.ToFloat(c.Expires);if(k>0){var i=new Date;i.setTime(i.getTime()+k*1e3);g=i}l=c.Path;j=c.SecureOnly}}catch(n){}var m=h+"="+a+(g?"; expires="+g.toGMTString():"")+"; path=/"+(d?"; domain="+d:"")+(j?"; secure":"");document.cookie=m},Remove:function(b){var a=new Date;a.setTime(a.getTime()-1);var c=Mstar.State.Cookies.Get(b);document.cookie=b+"="+c+"; expires="+a.toGMTString()},Clear:function(d){var b,c,e;try{var a;if(null!=(a=Mstar.Config.CookieConfig[d])){b=$MstarsiteConfig.Domain;c=a.Path;e=a.SecureOnly}}catch(f){}document.cookie=d+"="+(c?";path="+c:"")+(b?";domain="+b:"")+";expires=Thu, 01-Jan-1900 00:00:01 GMT"},Get:function(g,d){var e=new RegExp("(^| )"+g+"=([^;]*)(;|$)"),a=document.cookie.match(e);if(arguments.length==2)if(a!=null){var c,f=new RegExp("(^| |&)"+d+"=([^&]*)(&|$)"),b=a[2],b=b?b:document.cookie;return(c=b.match(f))?unescape(c[2]):""}else return"";else if(arguments.length==1)return a!=null?unescape(a[2]):""},ToJson:function(a){var a=a.replace(new RegExp("=","gi"),":'").replace(new RegExp("&","gi"),"',").replace(new RegExp(";\\s","gi"),"',");return eval("({"+a+(a.length>0?"'":"")+"})")}}};var $State=Mstar.State.Cookies;usingNamespace("Mstar").UIHelper={ImgPlayer:function(b,e,d){var a="display";$(b+" > a:first").css(a,"block");$(b+" > a").not(":first").css(a,"none");var c=1,j=false,h=800,i=800,k=500,f=5e3,g=$("#itemCount").val();$(e+">a").each(function(e){$(this).mouseover(function(){var f=" > a:visible",g=$(b+f).prevAll().length;if(e!==g){c=e;$(b+f).find("img").stop(true,true).fadeOut(h,function(){$(b+f).css(a,"none");$(b+" > a").eq(e).css(a,"block").find("img").fadeIn(i)});$(this).addClass(d).siblings("a").removeClass(d)}}).find("div").css("cursor","pointer")});j=setInterval(function(){$(e+">a").eq(c).mouseover();c++;if(c==g)c=0},f)}};var $UIHelper=Mstar.UIHelper;usingNamespace("Mstar").Resource={BuildImage:function(a){return Environment.ResourceUrl+a},BuildContent:function(a){return eval("Mstar.ResourceConfig.StringResourceConfig."+a)}};var $Resource=Mstar.Resource;usingNamespace("Mstar").HttpUtility={UrlEncode:function(a){return escape(a).replace(/\*/g,"%2A").replace(/\+/g,"%2B").replace(/-/g,"%2D").replace(/\./g,"%2E").replace(/\//g,"%2F").replace(/@/g,"%40").replace(/_/g,"%5F")},UrlDecode:function(a){return unescape(a)}};var $HttpUtility=Mstar.HttpUtility;usingNamespace("Mstar").Url={BuildCurrentUrl:function(a){return Environment.Url+"/"+$String.TrimStart(a,"/")},BuildUrl:function(a){return"/"+$String.TrimStart(a,"/")},BuildProductUrl:function(a,b){return $MstarsiteConfig.ProductUrlRewriteName+"-c"+a+"-"+b+".htm"},BuildImageUrl:function(){sResult=$MstarsiteConfig.UrlPathMappings.WWWSite;return sResult+$String.TrimStart(sPagePath,"/")}};var $Url=Mstar.Url,IsMouseOnOver=false;usingNamespace("Biz.Common").MiniCart={Refresh:function(c,a,e){var b,d=$Url.BuildUrl("Ajax/Shopping/MiniCart.ashx");if(a=="delete")b="Action=DelelteMiniCartItem&ItemNo="+c;if(a=="load"||a=="refresh")b="Action=LoadMiniCart";$.ajax({type:"POST",dataType:"html",url:d,cache:false,data:b+"&_="+Math.random(),beforeSend:function(){},success:function(b){Biz.Common.MiniCart.proccessed(b,a,e)},complete:function(){},error:function(){}})},proccessed:function(a,b,c){if(b=="delete")if(a.indexOf("ERROR:")!=-1){alert(a.split(":")[1]);return}else{window.location.reload();return}else if(b=="load"){Biz.Common.MiniCart.UpdateMiniCart(a);IsMouseOnOver==true&&$(c).addClass("over")}else if(b=="refresh"){Biz.Common.MiniCart.UpdateMiniCart(a);Biz.Common.MiniCart.UpdatePageHeader()}},UpdateMiniCart:function(a){$(".cartCot").html(a)},UpdatePageHeader:function(){var a=$("#minicartTotalQty").val();$(".shortcut .cart b").html(a)},onoff:function(b){var b="."+b,a=$(b);if(a.length)if($.browser.msie)a.parent().hover(function(){IsMouseOnOver=true;Biz.Common.MiniCart.Refresh("","load",this)},function(){IsMouseOnOver=false;a.parent().removeClass("over")});else a.parent().mouseover(function(){IsMouseOnOver=true;Biz.Common.MiniCart.Refresh("","load",this)}).mouseout(function(){IsMouseOnOver=false;$(this).removeClass("over")})}};usingNamespace("Biz.Common").Gold={LoadTodayPrice:function(b,c,a){var d=Environment.PageName.toLowerCase(),e=location.href.toLowerCase();if(d.indexOf("default")!=-1){$("#td-gold b").html(b);$("#td-bar b").html(c);$("#td-deco b").html(a)}}};usingNamespace("Biz.Common").PageHeader={DoSearch:function(b){var a=$.trim($("#txtKeyWord"+b).val()),c=$Resource.BuildContent("SearchValueNull");if(a==null||a==c||$String.IsNullOrEmpty(a)==true)a="";location.href="/Product/Search.aspx?keyword="+$HttpUtility.UrlEncode(a)},OnInit:function(a){var b="#txtKeyWord";if($(b+a)==null)return;$(b+a).keydown(function(b){if(b.keyCode==13){Biz.Common.PageHeader.DoSearch(a);return false}})},CurrentChannel:function(){var a="hover",c=Environment.PageName.toLowerCase(),b=$(".topNav li");if(c.indexOf("topic")!=-1)b.eq(6).addClass(a);else if(c.indexOf("experience")!=-1)b.eq(7).addClass("hover2");else b.each(function(){var b=$(this),d=b.children("a").attr("href").toLowerCase();if(d==c+".htm"){if(b.hasClass("Item1"))b.addClass("hover1");else b.addClass(a);b.siblings().removeClass(a).removeClass("hover1").removeClass("hover2")}})}};usingNamespace("Biz.Common").PromptText={systemError:function(){alert($Resource.BuildContent("SystemErrorInfo"))},textBoxFocus:function(a,b){a[0].style.color="#000000";$.trim(a.val())==b&&a.val("")},textBoxBlur:function(a,b){if($.trim(a.val())==""){a[0].style.color="#999999";a.val(b)}if($.trim(a.val())==b)a[0].style.color="#999999"},textBoxValueOrEmpty:function(c,d){var a=$("#"+c);if(a[0]==null)return;var b=d;a.focus(function(){Biz.Common.PromptText.textBoxFocus(a,b)});a.blur(function(){Biz.Common.PromptText.textBoxBlur(a,b)});Biz.Common.PromptText.textBoxBlur(a,b)}};usingNamespace("Biz.Common").OnOffCtrl={onoff_2:function(b){var a=$(b);a.length&&a.mouseover(function(){a.removeClass("over");$(this).addClass("over")})},onoff:function(d){var a="over",c="."+d,b=$(c);if(b.length)if($.browser.msie)b.parent().hover(function(){$(this).addClass(a)},function(){b.parent().removeClass(a)});else b.parent().mouseover(function(){$(this).addClass(a)}).mouseout(function(){$(this).removeClass(a)})},onoffDelay:function(f){var a="over",b,e,c="."+f,d=$(c);d.parent().mouseover(function(){var d=$(this);if($(this).find(c).css("display")=="block"){d.addClass(a);clearTimeout(e)}else b=setTimeout(function(){d.addClass(a)},50)}).mouseout(function(){var c=$(this);if(b){clearTimeout(b);e=setTimeout(function(){c.removeClass(a)},50)}});d.mouseover(function(){$(this).parent().addClass(a)})}};