(function(){var k="log",y=true,d,f,x=[],a=B(),g={},l={},b={blackbird:"blackbird",checkbox:"bbVis",filters:"bbFilters",controls:"bbControls",size:"bbSize"},c={debug:true,info:true,warn:true,error:true,profile:true};function A(){var d=[];for(type in c)d.push(['<span class="',type,'" type="',type,'"></span>'].join(""));var a=document.createElement("DIV");a.id=b.blackbird;a.style.display="none";a.innerHTML=['<div class="header">','<div class="left">','<div id="',b.filters,'" class="filters" title="click to filter by message type">',d.join(""),"</div>","</div>",'<div class="right">','<div id="',b.controls,'" class="controls">','<span id="',b.size,'" title="contract" op="resize"></span>','<span class="clear" title="clear" op="clear"></span>','<span class="close" title="close" op="close"></span>',"</div>","</div>","</div>",'<div class="main">','<div class="left"></div><div class="mainBody">',"<ol>",x.join(""),"</ol>",'</div><div class="right"></div>',"</div>",'<div class="footer">','<div class="left"><label for="',b.checkbox,'"><input type="checkbox" id="',b.checkbox,'" />Visible on page load</label></div>','<div class="right"></div>',"</div>"].join("");return a}function z(){var a=document.getElementsByTagName("BODY")[0];if(a.currentStyle&&y){if(a.currentStyle.backgroundImage=="none")a.style.backgroundImage="url(about:blank)";if(a.currentStyle.backgroundAttachment=="scroll")a.style.backgroundAttachment="fixed"}}function e(c,a){a=a.constructor==Array?a.join(""):a;if(f){var b=document.createElement("LI");b.className=c;b.innerHTML=['<span class="icon"></span>',a].join("");f.appendChild(b);i()}else x.push(['<li class="',c,'"><span class="icon"></span>',a,"</li>"].join(""))}function q(){f.innerHTML=""}function s(a){if(!a)a=window.event;var b=a.target?a.target:a.srcElement;if(b.tagName=="SPAN")switch(b.getAttributeNode("op").nodeValue){case"resize":p();break;case"clear":q();break;case"close":r()}}function t(d){if(!d)d=window.event;var g=d.target?d.target:d.srcElement;if(g&&g.tagName=="SPAN"){var a=g.getAttributeNode("type").nodeValue;if(d.altKey){var k=document.getElementById(b.filters).getElementsByTagName("SPAN"),m=0;for(entry in c)if(c[entry])m++;for(var l=m==1&&c[a],h=0;k[h];h++){var e=k[h].getAttributeNode("type").nodeValue;k[h].className=l||e==a?e:e+"Disabled";c[e]=l||e==a}}else{c[a]=!c[a];g.className=c[a]?a:a+"Disabled"}var j=[];for(a in c)!c[a]&&j.push(a);j.push("");f.className=j.join("Hidden ");i()}}function v(b){if(!b)b=window.event;var c=b.target?b.target:b.srcElement;a.load=c.checked;o()}function i(){f.scrollTop=f.scrollHeight}function u(){return d.style.display=="block"}function r(){d.style.display="none"}function m(){var a=document.getElementsByTagName("BODY")[0];a.removeChild(d);a.appendChild(d);d.style.display="block"}function n(b){if(b===undefined||b==null)b=a&&a.pos===null?1:(a.pos+1)%4;switch(b){case 0:g[0]="bbTopLeft";break;case 1:g[0]="bbTopRight";break;case 2:g[0]="bbBottomLeft";break;case 3:g[0]="bbBottomRight"}a.pos=b;o()}function p(c){if(c===undefined||c===null)c=a&&a.size==null?0:(a.size+1)%2;g[1]=c===0?"bbSmall":"bbLarge";var d=document.getElementById(b.size);d.title=c===1?"small":"large";d.className=d.title;a.size=c;o();i()}function o(){var b=[];for(entry in a){var f=a[entry]&&a[entry].constructor===String?'"'+a[entry]+'"':a[entry];b.push(entry+":"+f)}b=b.join(",");var c=new Date;c.setDate(c.getDate()+14);document.cookie=["blackbird={",b,"}; expires=",c.toUTCString(),";"].join("");var e=[];for(word in g)e.push(g[word]);d.className=e.join(" ")}function B(){var b=new RegExp(/blackbird=({[^;]+})(;|\b|$)/),a=b.exec(document.cookie);return a&&a[1]?eval("("+a[1]+")"):{pos:null,size:null,load:null}}function w(a){if(!a)a=window.event;var c=113;if(a&&a.keyCode==c){var b=u();if(b&&a.shiftKey&&a.altKey)q();else if(b&&a.shiftKey)n();else if(!a.shiftKey&&!a.altKey)b?r():m()}}function h(a,b,c){var a=a.constructor===String?document.getElementById(a):a;if(a.attachEvent){a["e"+b+c]=c;a[b+c]=function(){a["e"+b+c](window.event)};a.attachEvent("on"+b,a[b+c])}else a.addEventListener(b,c,false)}function j(a,b,c){var a=a.constructor===String?document.getElementById(a):a;if(a.detachEvent){a.detachEvent("on"+b,a[b+c]);a[b+c]=null}else a.removeEventListener(b,c,false)}window[k]={toggle:function(){u()?r():m()},resize:function(){p()},clear:function(){q()},move:function(){n()},debug:function(a){e("debug",a)},warn:function(a){e("warn",a)},info:function(a){e("info",a)},error:function(a){e("error",a)},profile:function(a){var b=new Date;if(a==undefined||a=="")e("error","<b>ERROR:</b> Please specify a label for your profile statement");else if(l[a]){e("profile",[a,": ",b-l[a],"ms"].join(""));delete l[a]}else{l[a]=b;e("profile",a)}return b}};h(window,"load",function(){var c=document.getElementsByTagName("BODY")[0];d=c.appendChild(A());f=d.getElementsByTagName("OL")[0];z();h(b.checkbox,"click",v);h(b.filters,"click",t);h(b.controls,"click",s);h(document,"keyup",w);p(a.size);n(a.pos);if(a.load){m();document.getElementById(b.checkbox).checked=true}i();window[k].init=function(){m();window[k].error(["<b>",k,"</b> can only be initialized once"])};h(window,"unload",function(){j(b.checkbox,"click",v);j(b.filters,"click",t);j(b.controls,"click",s);j(document,"keyup",w)})})})();